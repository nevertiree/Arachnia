<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.nevertiree.business.dao.BookMapper">
  <resultMap id="BaseResultMap" type="com.nevertiree.domain.Book">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <constructor>
      <idArg column="isbn" javaType="java.lang.String" jdbcType="CHAR" />
      <arg column="name" javaType="java.lang.String" jdbcType="VARCHAR" />
      <arg column="vote" javaType="java.lang.Integer" jdbcType="INTEGER" />
      <arg column="score" javaType="java.lang.Double" jdbcType="DOUBLE" />
      <arg column="rank5" javaType="java.lang.Double" jdbcType="DOUBLE" />
      <arg column="rank4" javaType="java.lang.Double" jdbcType="DOUBLE" />
      <arg column="rank3" javaType="java.lang.Double" jdbcType="DOUBLE" />
      <arg column="rank2" javaType="java.lang.Double" jdbcType="DOUBLE" />
      <arg column="rank1" javaType="java.lang.Double" jdbcType="DOUBLE" />
    </constructor>
  </resultMap>


  <sql id="Base_Column_List">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    isbn, name, vote, score, rank5, rank4, rank3, rank2, rank1
  </sql>

  <select id="queryBookByName" parameterType="String" resultMap="BaseResultMap">
    select * from book where name = #{name,jdbcType=CHAR} order by vote desc;
  </select>

  <select id="queryBookByVoteDesc" parameterType="int" resultMap="BaseResultMap">
    select * from book order by vote desc limit 0,#{topN,jdbcType=INTEGER};
  </select>

  <select id="queryBookByScoreDesc" parameterType="int" resultMap="BaseResultMap">
    select * from book order by score desc limit 0,#{topN,jdbcType=INTEGER};
  </select>


  <insert id="insertSelective" parameterType="com.nevertiree.domain.Book">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into book
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="isbn != null">
        isbn,
      </if>
      <if test="name != null">
        name,
      </if>
      <if test="vote != null">
        vote,
      </if>
      <if test="score != null">
        score,
      </if>
      <if test="rank5 != null">
        rank5,
      </if>
      <if test="rank4 != null">
        rank4,
      </if>
      <if test="rank3 != null">
        rank3,
      </if>
      <if test="rank2 != null">
        rank2,
      </if>
      <if test="rank1 != null">
        rank1,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="isbn != null">
        #{isbn,jdbcType=CHAR},
      </if>
      <if test="name != null">
        #{name,jdbcType=VARCHAR},
      </if>
      <if test="vote != null">
        #{vote,jdbcType=INTEGER},
      </if>
      <if test="score != null">
        #{score,jdbcType=DOUBLE},
      </if>
      <if test="rank5 != null">
        #{rank5,jdbcType=DOUBLE},
      </if>
      <if test="rank4 != null">
        #{rank4,jdbcType=DOUBLE},
      </if>
      <if test="rank3 != null">
        #{rank3,jdbcType=DOUBLE},
      </if>
      <if test="rank2 != null">
        #{rank2,jdbcType=DOUBLE},
      </if>
      <if test="rank1 != null">
        #{rank1,jdbcType=DOUBLE},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.nevertiree.domain.Book">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update book
    <set>
      <if test="name != null">
        name = #{name,jdbcType=VARCHAR},
      </if>
      <if test="vote != null">
        vote = #{vote,jdbcType=INTEGER},
      </if>
      <if test="score != null">
        score = #{score,jdbcType=DOUBLE},
      </if>
      <if test="rank5 != null">
        rank5 = #{rank5,jdbcType=DOUBLE},
      </if>
      <if test="rank4 != null">
        rank4 = #{rank4,jdbcType=DOUBLE},
      </if>
      <if test="rank3 != null">
        rank3 = #{rank3,jdbcType=DOUBLE},
      </if>
      <if test="rank2 != null">
        rank2 = #{rank2,jdbcType=DOUBLE},
      </if>
      <if test="rank1 != null">
        rank1 = #{rank1,jdbcType=DOUBLE},
      </if>
    </set>
    where isbn = #{isbn,jdbcType=CHAR}
  </update>

</mapper>